/* src/admin/index.css */

/* Import fonts - Satoshi for a modern, geometric feel */
@import url('https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap');

@import "tailwindcss";
@plugin "@tailwindcss/typography";

:root {
  /* Warm, inviting palette */
  --color-bg: #FAFAF8;
  --color-bg-subtle: #F5F5F3;
  --color-bg-muted: #EEEEE9;
  --color-surface: #FFFFFF;
  --color-border: #E8E8E3;
  --color-border-subtle: #F0F0EB;

  /* Text hierarchy */
  --color-text: #1A1A18;
  --color-text-secondary: #6B6B63;
  --color-text-muted: #9C9C91;

  /* Accent - warm coral */
  --color-accent: #E5644E;
  --color-accent-hover: #D45A45;
  --color-accent-subtle: #FEF2F0;

  /* Success/Error states */
  --color-success: #3D9A5D;
  --color-success-subtle: #F0F9F3;
  --color-error: #DC4E42;
  --color-error-subtle: #FEF2F1;
  --color-warning: #E09D3D;
  --color-warning-subtle: #FEF8EC;

  /* Shadows - soft and layered */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 2px 8px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.08), 0 2px 8px rgba(0,0,0,0.04);
  --shadow-focus: 0 0 0 3px rgba(229, 100, 78, 0.15);

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* Border radius */
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;
}

* {
  font-feature-settings: 'ss01' on, 'ss02' on;
}

body {
  font-family: 'Satoshi', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: var(--color-bg);
  color: var(--color-text);
  font-size: 14px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--color-border);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-muted);
}

/* Focus styles */
:focus-visible {
  outline: none;
  box-shadow: var(--shadow-focus);
}

/* Selection */
::selection {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

/* Prose overrides for rich text */
.prose {
  --tw-prose-body: var(--color-text);
  --tw-prose-headings: var(--color-text);
  --tw-prose-links: var(--color-accent);
  font-size: 15px;
}

.prose :where(a):hover {
  color: var(--color-accent-hover);
}

/* Internal links indicator */
.richtext-editor .ProseMirror a[data-content-ref] {
  color: var(--color-accent);
  text-decoration: underline;
  text-decoration-style: dashed;
}

/* Blockquote styling */
.richtext-editor .ProseMirror blockquote {
  border-left: 3px solid var(--color-accent);
  padding-left: 1rem;
  margin-left: 0;
  color: var(--color-text-secondary);
  font-style: italic;
}

/* Image figure wrapper (NodeView) - InDesign-style frame */
.richtext-editor .image-figure {
  position: relative;
  margin: 1rem 0;
}

/* Keep existing alignment styles */
.richtext-editor .image-figure[data-alignment="left"] {
  float: left;
  margin-right: 1.5rem;
  clear: left;
}

.richtext-editor .image-figure[data-alignment="right"] {
  float: right;
  margin-left: 1.5rem;
  clear: right;
}

.richtext-editor .image-figure[data-alignment="center"] {
  display: block;
  margin-left: auto;
  margin-right: auto;
  text-align: center;
  float: none;
  clear: both;
}

.richtext-editor .image-figure .image-container {
  display: block;
  position: relative;
  border: 1.5px dashed var(--color-border);
  border-radius: var(--radius-md);
  padding: 4px;
  transition: border-color var(--transition-fast);
}

.richtext-editor .image-figure .image-container:hover {
  border-color: var(--color-text-muted);
}

/* Selected state - solid accent border */
.richtext-editor .image-figure .image-container.selected {
  border-color: var(--color-accent);
  border-style: solid;
}

.richtext-editor .image-figure img {
  width: 100%;
  height: auto;
  border-radius: calc(var(--radius-md) - 2px);
  display: block;
}

/* Remove old selected style on img - now handled by container */
.richtext-editor .image-figure img.selected {
  outline: none;
  outline-offset: 0;
}

/* Size/alignment badge */
.richtext-editor .image-figure .image-badge {
  position: absolute;
  bottom: 8px;
  left: 8px;
  display: flex;
  gap: 4px;
  align-items: center;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  color: var(--color-text-secondary);
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  pointer-events: none;
  backdrop-filter: blur(4px);
}

/* Image caption */
.richtext-editor .image-figure figcaption {
  display: block;
  font-size: 0.875rem;
  color: var(--color-text-secondary);
  margin-top: 0.5rem;
  font-style: italic;
  text-align: center;
}

/* Image popover */
.image-popover {
  background: white;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-lg);
  padding: 4px;
  display: flex;
  align-items: center;
  gap: 2px;
  z-index: 50;
  white-space: nowrap;
}

.popover-group {
  display: flex;
  gap: 2px;
}

.popover-divider {
  width: 1px;
  height: 24px;
  background: var(--color-border);
  margin: 0 4px;
}

.popover-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 8px;
  font-size: 12px;
  font-weight: 500;
  color: var(--color-text-secondary);
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background var(--transition-fast), color var(--transition-fast);
}

.popover-btn:hover {
  background: var(--color-bg-subtle);
  color: var(--color-text);
}

.popover-btn.active {
  background: var(--color-accent-subtle);
  color: var(--color-accent);
}

.popover-btn-danger:hover {
  background: var(--color-error-subtle);
  color: var(--color-error);
}

/* Clear floats after paragraphs following floated images */
.richtext-editor .ProseMirror p::after {
  content: "";
  display: table;
  clear: both;
}

/* Legacy image styles (for backwards compatibility with old content) */
.richtext-editor .ProseMirror img.image-left {
  float: left;
  margin-right: 1.5rem;
  margin-bottom: 0.5rem;
  max-width: 50%;
}

.richtext-editor .ProseMirror img.image-right {
  float: right;
  margin-left: 1.5rem;
  margin-bottom: 0.5rem;
  max-width: 50%;
}

.richtext-editor .ProseMirror img.image-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  float: none;
  clear: both;
}
